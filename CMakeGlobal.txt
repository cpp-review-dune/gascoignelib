#############################################

#
# skip the following variables
#

MARK_AS_ADVANCED(CMAKE_BUILD_TYPE)
MARK_AS_ADVANCED(CMAKE_INSTALL_PREFIX)
MARK_AS_ADVANCED(CMAKE_BACKWARDS_COMPATIBILITY)

#############################################

#
#  caching the variables from the .gascoignerc file
#

SET(GASCOIGNE_STD                  ${GASCOIGNE_STD}                  CACHE PATH   "GascoigneStd input directory")
SET(GASCOIGNE_OUTPUT_PREFIX        ${GASCOIGNE_OUTPUT_PREFIX}        CACHE PATH   "Output path prefix, prepended onto output directories.")
SET(GASCOIGNE_CXX_FLAGS            ${GASCOIGNE_CXX_FLAGS}            CACHE STRING "Flags used by the compiler during all build types.")
SET(GASCOIGNE_COMPILER_DEFINITIONS ${GASCOIGNE_COMPILER_DEFINITIONS} CACHE STRING "Add -D define flags to command line for environments.")

IF(USE_ARCH)
  EXEC_PROGRAM(arch OUTPUT_VARIABLE ARCH)
  SET(LIBRARY_OUTPUT_PATH    ${GASCOIGNE_OUTPUT_PREFIX}/${ARCH}/lib CACHE PATH "Single output directory for building all libraries.")
  SET(EXECUTABLE_OUTPUT_PATH ${GASCOIGNE_OUTPUT_PREFIX}/${ARCH}/bin CACHE PATH "Single output directory for building all executables.")
ELSE(USE_ARCH)
  SET(LIBRARY_OUTPUT_PATH    ${GASCOIGNE_OUTPUT_PREFIX}/lib CACHE PATH "Single output directory for building all libraries.")
  SET(EXECUTABLE_OUTPUT_PATH ${GASCOIGNE_OUTPUT_PREFIX}/bin CACHE PATH "Single output directory for building all executables.")
ENDIF(USE_ARCH)

SET(CMAKE_CXX_FLAGS ${GASCOIGNE_CXX_FLAGS})
ADD_DEFINITIONS(${GASCOIGNE_COMPILER_DEFINITIONS})

#############################################

#
#  determining the neccesary additional libraries
#

IF(UMFPACK_WITH_AMD)
  SET(GASCOIGNE_LIBS Solver Problems MeshInterpretor LinAlg Mesh Common metis umfpack amd)
ELSE(UMFPACK_WITH_AMD)
  SET(GASCOIGNE_LIBS Solver Problems MeshInterpretor LinAlg Mesh Common metis umfpack)
ENDIF(UMFPACK_WITH_AMD)

LINK_DIRECTORIES(${LIBRARY_OUTPUT_PATH})

###############################################

#
#  setting the standars include directories
#

INCLUDE_DIRECTORIES(
  ${GASCOIGNE_STD}/src/Common 
  ${GASCOIGNE_STD}/src/Interface
  ${GASCOIGNE_STD}/src/Mesh
  ${GASCOIGNE_STD}/src/MeshInterpretor
  ${GASCOIGNE_STD}/src/Problems
  ${GASCOIGNE_STD}/src/LinAlg
  ${GASCOIGNE_STD}/src/Solver
)
